# 🛠️ 调试工作流程模板 V2

> **V2版本特点**: 简洁语言 + 人工确认机制 + 精炼经验总结

## 📑 快速导航

- [📋 标准流程](#-标准流程) - 7步完整调试流程
- [🔄 调试循环](#-调试循环) - 6步核心循环
- [📁 目录结构](#-目录结构) - 标准化文件组织
- [💡 调试原则](#-调试原则) - 核心方法论

### ⚡ 快速开始
```powershell
# 1. 描述问题 → 2. 确认解析 → 3. 创建文档 → 4. 初始化环境
Copy-Item "debug-system\workflow_template_v2.md" "debug-system\workflow_任务名_v2.md"
mkdir debug; cd debug; $round = 1
mkdir $round\{src,core,archive,deprecated,docs,logs,files}
# 5. 开始循环：计划→分析→修正→执行→检查→记录
```

---

## 🤖 自动生成区域

> **说明**: 任务专用文档中，AI将自动填充以下内容

### 📝 任务信息
- **项目**: [自动识别项目类型和技术栈]
- **问题**: [用户描述的具体问题]
- **目标**: [解决方案和成功标准]
- **环境**: [技术环境和依赖]

---

## 📁 目录结构

```
debug-system/
├── workflow_template_v2.md        # V2模板
├── workflow_任务名_v2.md           # 任务专用文档
├── templates/                     # 模板文件
└── debug/
    └── 1/                        # 调试轮次
        ├── README.md             # 调试记录
        ├── src/                  # 工作文件
        ├── core/                 # 核心解决方案
        ├── archive/              # 重要历程
        ├── deprecated/           # 废弃文件
        ├── docs/                 # 分析文档
        ├── logs/                 # 测试日志
        └── files/                # 其他文件
```

---

## 📋 标准流程

### 步骤1：用户描述问题
**格式**: "我的[项目类型]项目使用[技术栈]，在[操作]时出现[错误现象]。希望[解决目标]。"

### 步骤2：AI解析并格式化
AI提取关键信息并生成标准化任务描述。

### 步骤3：用户确认信息
暂停执行，等待用户检查AI解析结果，确认或修正任务信息，这一步骤可能持续多轮（步骤2/3），直至用户同意进入下一步骤。

### 步骤4：创建专用文档
**AI必须执行以下操作**：
```powershell
Copy-Item "debug-system\workflow_template_v2.md" "debug-system\workflow_任务名_v2.md"
```
- 为当前调试任务创建专用的工作流文档
- 文档名应反映具体的调试任务（如：workflow_高DPI缩放问题_v2.md）
- **更新自动生成区域**：在任务专用文档中填充具体的任务信息

### 步骤5：初始化调试环境
**AI必须执行以下操作**：
```powershell
mkdir debug; cd debug
$round = (Get-ChildItem -Directory -Name | Where-Object { $_ -match '^\d+$' } | Measure-Object -Maximum).Maximum + 1
if ($null -eq $round) { $round = 1 }
mkdir $round\{src,core,archive,deprecated,docs,logs,files}
Copy-Item "..\debug-system\templates\README-template.md" "$round\README.md"
```
- 创建标准化的调试环境目录结构
- 确定下一轮调试编号
- 初始化各个功能目录

### 步骤6：开始调试循环
进入6步调试循环，详见下节。

### 步骤7：完成检查决策
评估问题解决状态，决定生成报告或开展下一轮调试。

**满足条件时的归档步骤**：
1. **🗂️ 执行最终归档**: 将src中的文件按重要性分类到core/archive/deprecated目录
2. **📄 复制工作流文档**: 将`debug-system/workflow_任务名_v2.md`复制到对应的数字文件夹`debug/{轮次}/`中
3. **📋 更新INDEX.md**: 记录该轮调试的时间、问题、进展、结论，并更新问题状态
4. **📝 生成总结报告**: 完成调试轮次的总结文档

**复制工作流文档示例**：
```powershell
Copy-Item "debug-system\workflow_仿真图像保存错误_v2.md" "debug\18\"
```

---

## 🔄 调试循环

### 6.1 📋 计划
- 确定本轮调试目标
- 分析上轮遗留问题
- 制定具体测试计划

### 6.2 🔍 分析
- 复现问题现象
- 分析错误原因
- 定位问题范围
- **AI可能请求**: 网络资源、环境信息、配置详情等额外信息
- **推荐**: 使用小工作集方法隔离问题

### 6.3 💡 修正
- 设计解决方案
- 评估方案风险
- 选择最优策略

### 6.4 ⚙️ 执行
- 实施代码修改
- 执行测试验证

> **🤖 AI限制提醒**: 
> - AI可能无法直接查看测试执行结果
> - 此时应请求**用户手动执行测试**并反馈结果
> - **反馈格式**: "测试结果：[成功/失败]，现象：[具体描述]"

### 6.5 ✅ 检查
- 检查日志文件和控制台输出
- 分析用户反馈的测试结果
- 确认问题解决状态
- 识别新出现问题（如有）

> **说明**: 此阶段检查6.4执行结果，不执行新操作

### 6.6 📊 记录
- 更新调试文档
- **🗂️ 执行本轮归档**: 将src中的文件按重要性分类到core/archive/deprecated目录
- 规划下轮目标

---

## 💡 调试原则

### 🎯 核心方法论

#### 小工作集调试法
- **原理**: 创建最小化独立测试环境
- **适用**: 复杂系统中特定问题隔离
- **步骤**: 简化环境 → 简化数据 → 精确监控 → 问题复现

#### 分层归档原则
- **🔴 Core**: 5-10个核心解决方案文件
- **📚 Archive**: 重要调试历程和阶段成果
- **🗑️ Deprecated**: 无效或被替代的文件

#### 人机协作模式
- **AI负责**: 分析、建议、代码生成
- **用户负责**: 测试执行、结果确认、决策选择、提供额外信息
- **信息请求**: AI可能请求网络资源、环境信息、配置详情等
- **协作要点**: 及时反馈测试结果，明确描述现象，配合信息收集

### 📋 最佳实践

#### 问题定位
- 优先使用官方示例验证
- 创建独立测试脚本
- 对比不同版本差异
- 精确监控状态变化

#### 测试策略
- 使用数学函数作标准测试数据
- 建立操作前后状态对比
- 设计可重复执行的测试
- 保留每次测试的完整日志

#### 文档记录
- 实时更新调试记录
- 详细记录失败原因
- 总结有效解决方案
- 归档可复用的方法

#### 版本管理
- 新项目推荐最新稳定版本组合
- 现有项目评估升级成本和风险
- 记录版本兼容性测试结果
- 建立版本降级应急方案

---

## 📊 完成检查

### 评估标准
- ✅ 主要目标已达成
- ✅ 核心问题已解决
- ✅ 系统运行稳定
- ✅ 无重大新问题

### 决策流程
**满足条件** → **执行最终归档** → **复制工作流文档** → **更新debug/INDEX.md** → 生成总结报告  
**不满足** → 创建下轮调试环境

> **📁 最终归档要求**: 生成报告前必须完成所有调试轮次的最终归档，确保core目录包含完整解决方案
> 
> **📄 工作流文档复制**: 将任务专用工作流文档复制到对应数字文件夹，便于后续查阅和归档管理
> 
> **📋 INDEX.md更新要求**: 问题完全解决后必须更新`debug/INDEX.md`，记录该轮调试的时间、问题、进展、结论，并更新问题状态
> 
> **📄 INDEX.md模板**: 如果`debug/INDEX.md`不存在，使用`debug-system/templates/INDEX-template.md`创建

---

## 📋 文档规范

### 调试记录结构
- 测试目的
- 测试计划  
- 测试记录
- 原因分析
- 解决方案
- 实施情况
- 复测结果
- 仍存问题
- 本轮总结
- 下轮目标

### 文件命名规范
- 调试轮次：数字编号 (1/, 2/, ...)
- 工作流文档：workflow_任务名_v2.md
- 归档文件：按重要性分类存放

---

**V2版本更新**: 2025-06-20
- 简化语言表达
- 强化人工确认机制  
- 精炼经验总结
- 移除具体案例细节
